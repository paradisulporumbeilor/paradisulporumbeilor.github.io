<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <title>Coșul tău - Paradisul Porumbeilor</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: auto; padding: 20px; }
    h1 { text-align: center; }
    table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
    th { background-color: #f2f2f2; }
    img { width: 80px; }
    button {
      padding: 8px 12px; background-color: #dc3545; color: white;
      border: none; border-radius: 4px; cursor: pointer;
    }
    button:hover { background-color: #c82333; }
    #emptyMsg {
      text-align: center; color: #666; font-style: italic;
      margin-top: 30px;
    }
  </style>
</head>
<body>
  <h1>Coșul tău</h1>
  <table id="cartTable">
    <thead>
      <tr>
        <th>Produs</th>
        <th>Imagine</th>
        <th>Cantitate</th>
        <th>Preț unitar</th>
        <th>Total</th>
        <th>Acțiuni</th>
      </tr>
    </thead>
    <tbody id="cartBody">
      <!-- Produse din coș vor fi afișate aici -->
    </tbody>
  </table>

  <div id="emptyMsg" style="display:none;">Coșul este gol.</div>

  <script>
    const products = {
      hat: {
        name: "Palarie porumbei",
        price: 30,
        image: "hat.jpg"
      },
      sneakers: {
        name: "Sneakers pentru porumbei",
        price: 45,
        image: "sneakers.jpg"
      },
      food: {
        name: "Hrana premium",
        price: 20,
        image: "food.jpg"
      },
      nest: {
        name: "Cuib confortabil",
        price: 50,
        image: "nest.jpg"
      }
    };

    function loadCart() {
      const cart = JSON.parse(localStorage.getItem('cart')) || {};
      const tbody = document.getElementById('cartBody');
      tbody.innerHTML = '';

      let totalGeneral = 0;
      let itemCount = 0;

      for (let id in cart) {
        const quantity = cart[id];
        const product = products[id];
        if (!product) continue;

        const total = product.price * quantity;
        totalGeneral += total;
        itemCount += quantity;

        tbody.innerHTML += `
          <tr>
            <td>${product.name}</td>
            <td><img src="${product.image}" alt="${product.name}"></td>
            <td>${quantity}</td>
            <td>${product.price} lei</td>
            <td>${total} lei</td>
            <td><button onclick="removeFromCart('${id}')">Șterge</button></td>
          </tr>
        `;
      }

      if (itemCount === 0) {
        document.getElementById('emptyMsg').style.display = 'block';
        document.getElementById('cartTable').style.display = 'none';
      } else {
        document.getElementById('emptyMsg').style.display = 'none';
        document.getElementById('cartTable').style.display = 'table';

        tbody.innerHTML += `
          <tr>
            <td colspan="4" style="text-align:right"><b>Total general:</b></td>
            <td colspan="2"><b>${totalGeneral} lei</b></td>
          </tr>
        `;
      }
    }

    function removeFromCart(id) {
      let cart = JSON.parse(localStorage.getItem('cart')) || {};
      if (cart[id]) {
        delete cart[id];
        localStorage.setItem('cart', JSON.stringify(cart));
        loadCart();
      }
    }

    loadCart();
  </script>
</body>
</html>
